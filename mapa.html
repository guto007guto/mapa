<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mapa de Rede</title>
  <style>
    :root{
      /* ajuste fino se precisar */
      --sidebar-largura: 210px; /* ~ largura do menu esquerdo do Dude */
      --topo-altura: 0px;       /* se houver cabeçalho extra, ajuste aqui */
    }
    html,body{
      margin:0; height:100%; background:#0b0b0b;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .wrap{
      position:fixed; inset:0; overflow:hidden; background:#0b0b0b;
    }
    /* A “moldura” visível que esconde o menu */
    .viewport{
      position:absolute; inset:0;
      left:0; top:0; right:0; bottom:0;
      overflow:hidden; background:#0b0b0b;
    }
    /* O iframe fica deslocado para a esquerda para “cortar” o menu */
    .viewport iframe{
      position:absolute; top:calc(-1 * var(--topo-altura)); left:calc(-1 * var(--sidebar-largura));
      width:calc(100% + var(--sidebar-largura) + 40px);
      height:calc(100% + var(--topo-altura) + 40px);
      border:0; background:#0b0b0b;
    }

    /* Tela de aviso caso o site não permita ser incorporado em iframe */
    .fallback{
      position:absolute; inset:0; display:none; place-items:center; text-align:center; padding:24px; color:#eaeaea;
    }
    .no-frame .fallback{ display:grid; }
    .no-frame .viewport{ display:none; }
  </style>
</head>
<body>
  <div class="wrap" id="app">
    <div class="viewport">
      <iframe
        id="dude"
        src="http://177.92.205.214:9797/dude/main.html?page=map_info&id=60400"
        referrerpolicy="no-referrer"
        loading="eager"
      ></iframe>
    </div>

    <div class="fallback">
      <h1 style="margin:0 0 12px;">Não foi possível embutir o mapa</h1>
      <p>O servidor pode estar bloqueando exibição em iframe (X‑Frame‑Options/CSP).<br/>
         Abra diretamente: <strong>http://177.92.205.214:9797/dude/main.html?page=map_info&id=60400</strong></p>
    </div>
  </div>

  <script>
    // Detecta bloqueio de iframe (best-effort)
    (function(){
      const app = document.getElementById('app');
      const frame = document.getElementById('dude');
      let flagged = false;

      function markFallback(){
        if(flagged) return;
        flagged = true;
        app.classList.add('no-frame');
      }

      // Se o iframe não carregar em ~4s, mostra fallback
      const t = setTimeout(markFallback, 4000);
      frame.addEventListener('load', ()=> clearTimeout(t));
    })();
  </script>
</body>
</html>
